<!DOCTYPE html>
<html>
<head>
	<meta charset="UTF-8">
	<title>TestingDropdown</title>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.0/jquery.min.js"></script>
</head>
<body onload = "addSubject()">

	<select id="subject" onchange="allfunction1(this.value) ">
		<option value="0">--Please Choose--</option>
	</select>

	<select id="class1" onchange="postSubClass(this.value)">
		<option value="0">--Please Choose--</option>
	</select>

	<select id="teacherLecTime" onchange="postLectTime(this.value)">
		<option value="0">--Please Choose--</option>
	</select>

    <select id="section">
		<option value="0">--Please Choose--</option>
	</select>

    <button type="button" onclick = "getValue()">Click Me!</button>
</body>
	<script type="text/javascript">
		var subjectArr = {{ displayData|tojson }};
		function addSubject() {
			var subject1 = document.getElementById("subject");
			for(var j = 0; j<subjectArr.length; j++)
					{
						var value1 = subjectArr[j];
						var option1 = document.createElement("option");
						var text1 = document.createTextNode(value1);
						option1.appendChild(text1);
						subject1.appendChild(option1);
					}
		}








		    //$.post("/load_ajax", {
		      // data: JSON.stringify("world"),
            //}, function(data, status) {
		      //  alert(data);
            //});
        function postSubject(val) {
		    var val1 = val;
            //alert(val1);
		    $.ajax({
            type : "POST",
            url : "/load_ajax",
            data: JSON.stringify(val1, null, '\t'),
            contentType: 'application/json;charset=UTF-8',
            success: function(result) {





                //alert(result);
                //var ini = ["--Please Choose--"];
                var arr1 = clearData(result);
                //var arr1 = ini.concat(arr2);


			    var class1 = document.getElementById("class1");


			    var options1 = class1.getElementsByTagName("option");
			for(var m = 0; m<options1.length; m++)
			{
				var op = options1[m];
				class1.removeChild(op);
				m--;
			}

			    for(var j = 0; j<arr1.length; j++)
					{
						var value1 = arr1[j];
						var option1 = document.createElement("option");
						var text1 = document.createTextNode(value1);
						option1.appendChild(text1);
						class1.appendChild(option1);
					}


			    var classValue = arr1[0];
                postSubClass(classValue);



            }
        });
        }


        function postSubClass(class1) {
		    $.ajax({
            type : "POST",
            url : "/load_ajax2",
            data: JSON.stringify(class1, null, '\t'),
            contentType: 'application/json;charset=UTF-8',
            success: function(result) {

                //alert(result);
                //var ini = ["--Please Choose--"];
                var arr1 = clearData(result);
                //var arr1 = ini.concat(arr1);

                //alert(arr1);

			    var teacherLecTime = document.getElementById("teacherLecTime");


			    var options1 = teacherLecTime.getElementsByTagName("option");
			for(var m = 0; m<options1.length; m++)
			{
				var op = options1[m];
				teacherLecTime.removeChild(op);
				m--;
			}

			    for(var j = 0; j<arr1.length; j++)
					{
						var value1 = arr1[j];
						var option1 = document.createElement("option");
						var text1 = document.createTextNode(value1);
						option1.appendChild(text1);
						teacherLecTime.appendChild(option1);
					}


			    var lecValue = arr1[0];
                postLectTime(lecValue);


            }
        });
        }


        function postLectTime(val) {
		    $.ajax({
            type : "POST",
            url : "/load_ajax3",
            data: JSON.stringify(val, null, '\t'),
            contentType: 'application/json;charset=UTF-8',
            success: function(result) {

                //alert(result);
                //var ini = ["--Please Choose--"];
                var arr1 = clearData(result);
                //var arr1 = ini.concat(arr2);



			    var section = document.getElementById("section");


			    var options1 = section.getElementsByTagName("option");
			for(var m = 0; m<options1.length; m++)
			{
				var op = options1[m];
				section.removeChild(op);
				m--;
			}

			    for(var j = 0; j<arr1.length; j++)
					{
						var value1 = arr1[j];
						var option1 = document.createElement("option");
						var text1 = document.createTextNode(value1);
						option1.appendChild(text1);
						section.appendChild(option1);
					}


            }
        });
        }






		function allfunction1(val) {

			postSubject(val);

		}

		function getValue() {
		    var classValue = document.getElementById("class1").value;
		    alert(classValue);
        }








		function clearData (string) {
            var s1 = string.substring(1);
            var s2 = s1.substring(0, s1.length-1);
            var goodData = s2.split(",");
            for (var i = 0; i < goodData.length; i ++) {
                goodData[i] = goodData[i].substring(1, goodData[i].length-1);
                if(i >= 1) {
                    goodData[i] = goodData[i].substring(1, goodData[i].length);
                }
            }
            return goodData;
        }



	</script>
</html>










